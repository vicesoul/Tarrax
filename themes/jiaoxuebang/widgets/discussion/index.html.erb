<% unless @discussions.blank? && context.is_a?(User) %>
<div <%= data_widget %> >
  <div class="box <%= @opts[:box_class] %>">
    <div class="box_head">
      <%= render :partial => "shared/box_header", :locals => { :header_title => t('#cells.discussion.title', 'Discussion') } %>
    </div>
    <div class="box_body">
      <% unless @discussions.blank? %>
        <%= render :partial => "shared/contexts", :locals => { :objects => @discussions } %>
      <% else %>
        <p><%= t('#cells.discussion.empty_body', 'Empty discussions') %></p>
      <% end %>
      <% unless @discussions.blank? %>
      <div class="link_more" style="text-align: right;">
        <% 
            more_link = if context.is_a?(User)
                          "users/#{context.id}/more_discussion_topics"
                        else
                          "accounts/#{context.id}/more_discussion_topics"
                        end
        %>
        <%= link_to t('#cells.assignment.more', 'More>>'), more_link %>
      </div>
      <% end %>
    </div>
  </div>
</div>
<% end %>
